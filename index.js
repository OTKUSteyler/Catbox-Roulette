(function(a,u,s,n){"use strict";const{sendBotMessage:f}=s.findByProps("sendBotMessage"),p=s.findByProps("sendMessage","editMessage"),c=["png","jpg","webp"],d="abcdefghijklmnopqrstuvwxyz0123456789";async function h(){const i=new Set;n.showToast({content:"Rolling for Catbox link...",type:"info"});for(let e=0;e<400;e++){let t=Array(6).fill(0).map(function(){return d.charAt(Math.floor(Math.random()*36))}).join("");for(;i.has(t);)t=Array(6).fill(0).map(function(){return d.charAt(Math.floor(Math.random()*36))}).join("");i.add(t);const r=c[Math.floor(Math.random()*c.length)],l=`https://files.catbox.moe/${t}.${r}`;try{const o=await fetch(l,{method:"HEAD",redirect:"follow"});if(o.ok&&(o.headers.get("content-type")||"").includes("image/"))return l}catch{}await new Promise(function(o){return setTimeout(o,700+Math.random()*800)})}return null}const m=u.registerCommand({name:"catbox",displayName:"Catbox Roulette",description:"Random Catbox image \u2192 sends to chat & copies to clipboard",displayDescription:"Random Catbox image \u2192 sends to chat & copies to clipboard",options:[],execute:async function(i,e){const t=await h();if(!t){n.showToast({content:"No link found after tries \u2013 try again",type:"failure"}),f(e.channel.id,"Couldn't find a valid Catbox link. Try again.");return}const r=Date.now().toString();p.sendMessage(e.channel.id,{content:t},void 0,{nonce:r});try{await navigator.clipboard.writeText(t),n.showToast({content:`Sent & copied: ${t}`,type:"success"})}catch{n.showToast({content:`Sent but copy failed: ${t}`,type:"warning"})}},applicationId:"-1",inputType:1,type:1});return a.default=m,Object.defineProperty(a,"__esModule",{value:!0}),a})({},vendetta.commands,vendetta.metro,vendetta.toasts);
