(function(o,d,s){"use strict";const l=async function(i){const e="https://konachan.com/post.json",t=i?"rating:explicit":"rating:safe",a=Math.floor(Math.random()*100);try{const n=await(await fetch(`${e}?tags=${t}&limit=1&page=${a}`)).json();return!Array.isArray(n)||n.length===0?null:n[0].file_url}catch(n){return console.error("[KonoChan Randomizer] Error fetching image:",n),null}},{sendBotMessage:r}=s.findByProps("sendBotMessage"),h=s.findByProps("sendMessage","editMessage");let m=d.registerCommand({name:"konoSend",displayName:"konoSend",description:"Fetch a random image from KonoChan and send it to the channel.",displayDescription:"Fetch a random image from KonoChan and send it to the channel.",options:[{name:"nsfw",description:"Include NSFW content?",type:5,required:!1,displayName:"nsfw",displayDescription:"Include NSFW content?"}],execute:async function(i,e){const t=new Map(i.map(function(c){return[c.name,c]})).get("nsfw")?.value||!1;if(t&&!e.channel.nsfw_){r(e.channel.id,"This channel is not marked as NSFW. Use an NSFW channel instead.");return}const a=await l(t);if(!a){r(e.channel.id,"No image found. Try again later.");return}const n=Date.now().toString();h.sendMessage(e.channel.id,{content:a},void 0,{nonce:n})},applicationId:"-1",inputType:1,type:1});return o.default=m,Object.defineProperty(o,"__esModule",{value:!0}),o})({},vendetta.commands,vendetta.metro);
